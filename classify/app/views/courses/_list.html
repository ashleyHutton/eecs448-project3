<% totalRating = 0 %>
<% diff_rating = 0 %>
<% work_rating = 0 %>
<% like_rating = 0 %>

<div class = "table">
      <table class = "table table-striped">
        <thead>
          <tr>
            <th>Name</th>
            <!--<th>School</th>-->
            <th>Average Difficulty Rating</th>
            <th>Average Workload Rating</th>
            <th>Average Likeability Rating</th>
            <th colspan="3"></th>
          </tr>
        </thead>

        <tbody>
          <% @courses.each do |course| %>
            <tr>
              <td><%= course.name %></td>

              <!--<td><%= course.school.name if course.school %></td>-->
              <% course.scores.each do |score| %>
                <% diff_rating += score.difficulty_rating %>
                <% work_rating += score.workload_rating %>
                <% like_rating += score.likeability_rating %>
                <% totalRating = totalRating + 1 %>
              <% end %>
              <% if totalRating > 0 %>
                <td><%= diff_rating / totalRating %></td>
                <td><%= work_rating / totalRating %></td>
                <td><%= like_rating / totalRating %></td>
              <% else %>
                <td> N/A </td>
                <td> N/A </td>
                <td> N/A </td>
              <% end %>
              <td><%= link_to 'See Scores', course %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>